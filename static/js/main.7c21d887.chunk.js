(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"pixabay":{"key":"22720340-7359735e3dba5a0bd9021ac04","per_page":12,"orientation":"horizontal"},"modal":{"escapeKeys":["Escape","Space","Enter","Backspace"],"intersectToClose":0.8},"update_ms":500}')},14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3Kfe1"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2O0_y",Modal:"Modal_Modal__2AKIV"}},17:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__GO5-x"}},18:function(e,t,a){e.exports={Button:"Button_Button__1huuI"}},24:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(16),c=a.n(o),i=(a(24),a(4)),l=a(19),s=a(3),u=a.n(s),h=a(10),d=a(5),p=a(6),m=a(8),g=a(7),b=a(11),f=a.n(b),j=a(12),v=j.pixabay,x=v.orientation,y=v.per_page,O=v.key;function S(e){return _.apply(this,arguments)}function _(){return(_=Object(h.a)(u.a.mark((function e(t){var a,n,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,e.next=3,fetch("https://pixabay.com/api/?image_type=photo&orientation=".concat(x,"&q=").concat(t,"&page=").concat(a,"&per_page=").concat(y,"&key=").concat(O));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Error ".concat(n.status,": ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a(9),I=a.n(k),w=a(0),C=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.handleChange=function(t){e.setState({value:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.value)},e}return Object(p.a)(a,[{key:"render",value:function(){return Object(w.jsx)("header",{className:I.a.SearchBar,children:Object(w.jsxs)("form",{className:I.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(w.jsx)("button",{type:"submit",className:I.a.SearchFormButton,children:Object(w.jsx)("span",{className:I.a.SearchFormButtonLabel,children:"\ud83d\udd0d"})}),Object(w.jsx)("input",{className:I.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.value,onChange:this.handleChange})]})})}}]),a}(n.Component),B=a(14),N=a.n(B),M=function(e){return Object(w.jsx)("li",{className:N.a.ImageGalleryItem,"data-index":e.index,children:Object(w.jsx)("img",{src:e.previewURL,alt:e.tags,width:e.previewWidth,height:e.previewHeight,className:N.a.ImageGalleryItemImage})})},E=a(17),F=a.n(E),G=function(e){var t=e.hits,a=e.onClick;return Object(w.jsx)("ul",{className:F.a.ImageGallery,onClick:a,children:t.map((function(e,t){return Object(n.createElement)(M,Object(i.a)(Object(i.a)({},e),{},{index:t,key:t}))}))})},L=a(18),T=a.n(L),A=function(e){var t=e.onClick;return Object(w.jsx)("button",{type:"button",onClick:t,className:T.a.Button,children:"Load More"})},H=a(15),q=a.n(H),D=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0},e.img=null,e.div=null,e.handleClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e.onImageLoad=function(t){e.img=t.currentTarget,e.div=e.img.closest("div"),e.setState({loading:!1})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.largeImageURL,a=e.tags;return Object(w.jsx)("div",{className:q.a.Overlay,onClick:this.handleClick,children:Object(w.jsxs)("div",{className:q.a.Modal,children:[this.state.loading&&Object(w.jsx)(f.a,{type:"Oval",color:"#ffffff",width:"100px",height:"100px"}),Object(w.jsx)("img",{src:t,alt:a,onLoad:this.onImageLoad,hidden:this.state.loading})]})})}},{key:"componentDidUpdate",value:function(){if(this.div&&this.img){var e=(this.img.clientWidth-this.div.clientWidth)/2,t=(this.img.clientHeight-this.div.clientHeight)/2;this.div.scrollTo({left:e>0?e:0,top:t>0?t:0})}}}]),a}(n.Component),K=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={total:0,totalHits:0,hits:[],query:"",page:1,pageCount:1,loading:!1,modalIndex:-1},e.allowScroll=!1,e.handleSubmit=function(){var t=Object(h.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),t.next=4,S(a);case 4:(n=t.sent).query=a,n.page=1,n.pageCount=Math.ceil(n.total/j.pixabay.per_page),n.loading=!1,e.allowScroll=!0,e.setState(n),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),e.handleError(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),e.handleGalleryClick=function(t){var a=t.target.closest("li");a&&e.setState({modalIndex:Number(a.dataset.index)})},e.handleLoadMore=Object(h.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.state,e.setState({loading:!0}),t.next=5,S(n.query,++n.page);case 5:r=t.sent,(a=n.hits).push.apply(a,Object(l.a)(r.hits)),n.loading=!1,e.allowScroll=!0,e.setState(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.handleError(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.handleModalClose=function(){e.setState({modalIndex:-1})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){e.state.modalIndex<0||"Escape"===t.code&&e.setState({modalIndex:-1})}))}},{key:"handleError",value:function(e){alert(e.message),this.setState((function(e){return{loading:!1,pageCount:e.page}}))}},{key:"componentDidUpdate",value:function(){this.allowScroll&&(window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),this.allowScroll=!1)}},{key:"render",value:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(C,{onSubmit:this.handleSubmit}),Object(w.jsx)(G,Object(i.a)(Object(i.a)({},this.state),{},{onClick:this.handleGalleryClick})),this.state.loading&&Object(w.jsx)(f.a,{type:"Oval",color:"#4354b0",width:"50px",height:"50px"}),this.state.page<this.state.pageCount&&Object(w.jsx)(A,{onClick:this.handleLoadMore}),this.state.modalIndex>-1&&Object(w.jsx)(D,Object(i.a)(Object(i.a)({},this.state.hits[this.state.modalIndex]),{},{onClose:this.handleModalClose}))]})}}]),a}(n.Component);c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(K,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={SearchBar:"SearchBar_SearchBar__1KZPC",SearchForm:"SearchBar_SearchForm__1meme",SearchFormButton:"SearchBar_SearchFormButton__2ANbg",SearchFormInput:"SearchBar_SearchFormInput__2tuir"}}},[[47,1,2]]]);
//# sourceMappingURL=main.7c21d887.chunk.js.map